<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Login</title>
    <script>
        function toggleForm() {
            document.getElementById("loginForm").classList.toggle("hidden");
            document.getElementById("registerForm").classList.toggle("hidden");
        }

        function submitForm(event) {
            event.preventDefault(); // Verhindert das Neuladen der Seite

            const formData = new FormData(event.target);
            const action = event.target.getAttribute('action');

            fetch(action, {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                // Prüfe, ob die Antwort auf eine erfolgreiche Anmeldung hinweist
                if (action === "login.php" && data.includes("Willkommen")) {
                    // Umleitung auf die Spielfeldseite
                    window.location.href = "spielfeld.php"; 
                } else {
                    // Zeigt die Fehlermeldung oder andere Rückmeldungen an
                    document.getElementById("response").innerHTML = data;
                }
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>4 Gewinnt</h1>
        <div id="response"></div> <!-- Hier wird die Antwort vom Server angezeigt -->

        <div id="loginForm">
            <h2>Login</h2>
            <form action="login.php" method="POST" onsubmit="submitForm(event)">
                <input type="text" name="username" placeholder="Benutzername" required>
                <input type="password" name="password" placeholder="Passwort" required>
                <button type="submit">Einloggen</button>
            </form>
            <p>Noch kein Konto? <a href="javascript:void(0);" onclick="toggleForm()">Hier registrieren</a></p>
        </div>

        <div id="registerForm" class="hidden">
            <h2>Registrierung</h2>
            <form action="login.php" method="POST" onsubmit="submitForm(event)">
                <input type="text" name="username" placeholder="Benutzername" required>
                <input type="password" name="password" placeholder="Passwort" required>
                <input type="hidden" name="register" value="1"> <!-- Versteckte Eingabe -->
                <button type="submit">Registrieren</button>
            </form>
            <p>Bereits ein Konto? <a href="javascript:void(0);" onclick="toggleForm()">Hier einloggen</a></p>
        </div>
    </div>

    <style>
        .hidden {
            display: none;
        }
    </style>
</body>
</html>

